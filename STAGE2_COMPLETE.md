# Этап 2: Проектирование БД и создание миграций ✅

## Выполнено

### 1. Проанализирована структура данных
Изучена структура данных из старого приложения (Vue 2) и спроектирована реляционная схема БД.

### 2. Созданы миграции для всех таблиц

#### Порядок выполнения миграций:
1. ✅ `pages` - Страницы (годы)
2. ✅ `departments` - Отделы
3. ✅ `employees` - Сотрудники
4. ✅ `periods` - Расчетные периоды (месяцы)
5. ✅ `period_departments` - Связь периодов с отделами
6. ✅ `period_items` - Дни периода
7. ✅ `item_employees` - Связь дней с сотрудниками

### 3. Настроены связи и ограничения

- **Внешние ключи** с каскадным удалением (CASCADE DELETE)
- **Уникальные индексы** для предотвращения дублирования данных
- **Типы данных** оптимизированы для MySQL

## Запуск миграций

```bash
# Проверка миграций (без выполнения)
php artisan migrate --pretend

# Выполнение миграций
php artisan migrate

# Откат миграций (если нужно)
php artisan migrate:rollback
```

## Структура БД

Подробная схема описана в файле `DATABASE_SCHEMA.md`

### Основные связи:
```
pages → periods → period_departments → period_items → item_employees
                                    ↓
                              departments → employees
```

## Следующий этап

**Этап 3: Backend (Laravel API)**
- Создание моделей Eloquent
- Создание API контроллеров
- Валидация данных
- Бизнес-логика расчетов

